# –¢—Ä–µ–π—Ç—ã: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–¢—Ä–µ–π—Ç—ã –≤ Brick ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º. –ö–∞–∂–¥—ã–π —Ç—Ä–µ–π—Ç —Ä–µ—à–∞–µ—Ç –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É.
## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

**–¢—Ä–µ–π—Ç—ã `WithCache` –∏ `WithInheritance` –Ω–µ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

–ï—Å–ª–∏ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ —Ç—Ä–µ–π—Ç—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∫–ª–∞—Å—Å—ã **–¥–æ–ª–∂–Ω—ã —è–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∏—Ö**:

```php
// ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢: —Ç—Ä–µ–π—Ç—ã –Ω–µ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è
readonly class BaseComponent extends Brick
{
    use WithCache; // –¢—Ä–µ–π—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ
}

class ChildComponent extends BaseComponent
{
    // WithCache –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω –∑–¥–µ—Å—å!
}
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: —è–≤–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–º –∫–ª–∞—Å—Å–µ
readonly class BaseComponent extends Brick
{
    use WithCache;
}

class ChildComponent extends BaseComponent
{
    use WithCache; // –Ø–≤–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ–º —Å–Ω–æ–≤–∞
}
```

## –û–±–∑–æ—Ä —Ç—Ä–µ–π—Ç–æ–≤

| –¢—Ä–µ–π—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |–ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è?|
|-------|------------|-------------------|------------|
| `WithCache` | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ | –î–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å —Ç—è–∂—ë–ª—ã–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º |‚ùå –ù–µ—Ç|
| `WithHelpers` | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã | –î–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —à–∞–±–ª–æ–Ω–∞—Ö |‚úÖ –î–∞|
| `WithStrictHelpers` | –°—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ | –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ |‚úÖ –î–∞|
| `WithInheritance` | –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |‚ùå –ù–µ—Ç|

## WithCache: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PSR-16 –∫—ç—à–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```php
use OlegV\BrickManager;
use Symfony\Component\Cache\Adapter\FilesystemAdapter;

BrickManager::setCache(new FilesystemAdapter(__DIR__ . '/cache'));
BrickManager::$cacheTtl = 1800; // 30 –º–∏–Ω—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```php
readonly class Article extends \OlegV\Brick
{
    use \OlegV\Traits\WithCache;
    
    public function __construct(
        public string $title,
        public string $content
    ) {
        parent::__construct();
    }
    
    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∫–∞—Å—Ç–æ–º–Ω—ã–π TTL
    protected function ttl(): int
    {
        return 3600; // 1 —á–∞—Å –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    }
}

// –° –≥–ª–æ–±–∞–ª—å–Ω—ã–º TTL (1800 —Å–µ–∫—É–Ω–¥)
echo $article->render();

// –° –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º TTL (7200 —Å–µ–∫—É–Ω–¥)
echo $article->render(7200);
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç TTL:
1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π (–≤ `render($ttl)`)
2. –ö–ª–∞—Å—Å–∞ (–∏–∑ –º–µ—Ç–æ–¥–∞ `ttl()`)
3. –ì–ª–æ–±–∞–ª—å–Ω—ã–π (–∏–∑ `BrickManager::$cacheTtl`)

## üõ†Ô∏è WithHelpers: –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä –ø–æ–ª–µ–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —à–∞–±–ª–æ–Ω–∞—Ö.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```php
// template.php

<!-- HTML –∏ –∞—Ç—Ä–∏–±—É—Ç—ã -->
<div class="<?= $this->classList([
    'btn',
    'btn-primary' => $this->isPrimary,
    'disabled' => $this->isDisabled
]) ?>"
     <?= $this->attr([
        'id' => 'button-' . $this->id,
        'data-action' => $this->action,
     ]) ?>>
</div>

<!-- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö -->
<p>
    –î–∞—Ç–∞: <?= $this->date($this->createdAt, 'd.m.Y H:i') ?><br>
    –ß–∏—Å–ª–æ: <?= $this->number($this->price, 2, ',', ' ') ?> ‚ÇΩ<br>
    –û–±—Ä–µ–∑–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: <?= $this->truncate($this->description, 100) ?>
</p>

<!-- URL –∏ —Å—Ç—Ä–æ–∫–∏ -->
<a href="<?= $this->url('/products', ['category' => $this->categoryId]) ?>">
    –°—Å—ã–ª–∫–∞
</a>

<p>
    <?= $this->count ?> 
    <?= $this->plural($this->count, ['–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π', '–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è', '–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤']) ?>
</p>
```

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥–æ–≤

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `e(?string $value): string` | HTML —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `classList(array $classes): string` | CSS –∫–ª–∞—Å—Å—ã –∏–∑ –º–∞—Å—Å–∏–≤–∞ |
| `attr(array $attributes): string` | HTML –∞—Ç—Ä–∏–±—É—Ç—ã |
| `date($date, string $format): string` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã |
| `number($num, int $decimals, ...): string` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–ª–∞ |
| `json(mixed $data): string` | JSON —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| `truncate(string $text, int $length): string` | –û–±—Ä–µ–∑–∫–∞ —Å—Ç—Ä–æ–∫–∏ |
| `url(string $baseUrl, array $params): string` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL |
| `uniqueId(string $prefix): string` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| `plural(int $count, array $forms): string` | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ |

## WithStrictHelpers: —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤

–†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ —Å nullable –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

```php
// template.php

<!-- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ -->
<?php if ($this->hasString($this->title)): ?>
    <h1><?= $this->e($this->getString($this->title)) ?></h1>
<?php else: ?>
    <h1>–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è</h1>
<?php endif; ?>

<!-- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏ -->
<?php if ($this->hasArray($this->tags)): ?>
    –¢–µ–≥–∏: <?= implode(', ', $this->getArray($this->tags)) ?>
<?php endif; ?>

<!-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ -->
<?= $this->arrayGet($this->config, 'theme', 'light') ?>
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ú–µ—Ç–æ–¥—ã |
|-----------|--------|
| **–ü—Ä–æ–≤–µ—Ä–∫–∏** | `hasString()`, `hasNumber()`, `hasArray()` |
| **–ü–æ–ª—É—á–µ–Ω–∏–µ** | `getString()`, `getNumber()`, `getArray()` |
| **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è** | `toString()`, `toInt()`, `toFloat()` |
| **–†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏** | `arrayGet()`, `arrayHasKey()` |

## WithInheritance: –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–æ–≤ –∏ –∞—Å—Å–µ—Ç–æ–≤.

### –ü—Ä–∏–º–µ—Ä

**–ë–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (`BaseCard`):**
```php
readonly class BaseCard extends \OlegV\Brick
{
    public function __construct(
        public string $title,
        public string $content
    ) {
        parent::__construct();
    }
}
```

**–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (`ProductCard`):**
```php
readonly class ProductCard extends BaseCard
{
    use \OlegV\Traits\WithInheritance;
    
    public function __construct(
        string $title,
        string $content,
        public float $price
    ) {
        parent::__construct($title, $content);
    }
}
```

### –ß—Ç–æ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

1. **–®–∞–±–ª–æ–Ω—ã**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –≤ —Ü–µ–ø–æ—á–∫–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
2. **CSS**: –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤—Å–µ `style.css` –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è –∫ –ø–æ—Ç–æ–º–∫—É
3. **JS**: –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤—Å–µ `script.js` –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è –∫ –ø–æ—Ç–æ–º–∫—É

### –ü–æ—Ä—è–¥–æ–∫ –ø–æ–∏—Å–∫–∞:
- `ProductCard/template.php` ‚Üí –Ω–µ –Ω–∞–π–¥–µ–Ω
- `BaseCard/template.php` ‚Üí –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–π—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

```php
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç
readonly class ArticleCard extends Brick
{
    use WithCache;           // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    use WithHelpers;         // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
    use WithStrictHelpers;   // –°—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
    // ...
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º
readonly class SpecialProductCard extends ProductCard
{
    use WithInheritance;     // –ù–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç ProductCard
    use WithCache;           // –ü–ª—é—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    // ...
}
```

### –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç—Ä–µ–π—Ç–æ–≤:
```php
protected function initialize(BrickManager $manager): void
{
    // –°–Ω–∞—á–∞–ª–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ —Ç—Ä–µ–π—Ç–æ–≤
    // –ü–æ—Ç–æ–º –±–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    parent::initialize($manager);
}
```

---

**–î–∞–ª–µ–µ:** –£–∑–Ω–∞–π—Ç–µ –æ [—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –∞—Å—Å–µ—Ç–æ–≤](assets.md) –∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö `AssetRenderer`
